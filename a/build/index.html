<!doctype html>
<html>
	<head>
		<title>JS1k, 1k demo submission [ID]</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<canvas id="c"></canvas>
		<script>
			var b = document.body;
			var c = document.getElementsByTagName('canvas')[0];
			var a = c.getContext('2d');
			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218
		</script>
		<script>
// start of submission //
function u(e,t,n){return t=document.createElement(t||"div"),e.appendChild(t),n&&t.addEventListener("change",n),t}function A(d){function e(){C=function(e,t){return 0>e?1:(e/=k,1<e?0:m.pow(1-e,t))},N=function(e){return v[~~e%k]};var e=w.getChannelData(0);for(s=k;--s;)e[s]=h(d.b),x[s]=h(d.a);l.hash=JSON.stringify(z)}d.d=this;var g=u(y),w=n.createBuffer(1,k,k),x=[],q=u(g,t,function(){d.a=q.value,e()});q.size=40,q.value=d.a;var r=u(g,t,function(){d.b=r.value,e()});r.size=99,r.value=d.b,e(),d.c=function(){if(x[j])with(n.createBufferSource())buffer=w,connect(p),start(0)}}var f=[{b:"m.sin(s/99*C(s,1))*C(s,2)",a:"!(s%4)"},{b:"((s>>9)&s>>8)%2*C(s,9)",a:"!(s%6)"},{b:"N(s)*C(s,49)/3",a:"1"},{b:"N(s)*C(s,9)/3",a:"s%4==2"},{b:"((s>>8)%4)*C(s,30)/4",a:"1"}];m=Math;var h=eval,j=0,k=44100,l=window.top.location,n=new webkitAudioContext,p=n.createDynamicsCompressor();p.connect(n.destination);var t="input";for(var v=[],i=k;i--;)v.push(m.random());var y=u(b),z=l.hash?h(l.hash.substr(1)):f;setInterval(function(){z.map(function(e){e.c()}),j++,j%=128},128);for(i=z.length;10>i;i++){var o={a:0,b:0};z.push(o)}z.map(function(e){new A(e)});// end of submission //
		</script>
	</body>
</html>
